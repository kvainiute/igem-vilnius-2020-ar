<!doctype html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163985569-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-163985569-1');

    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Vilnius iGEM AR</title>
    <link href="./css/fonts.css" rel="stylesheet">
    <link href="./css/main-temp.css" rel="stylesheet">
    <link href="./css/languagebox.css" rel="stylesheet">
    <link href="./css/opendyslexic.css" rel="stylesheet">
</head>

<body>
    <div id="main">
        <section id="intro" class="section">
            <div id="top" class="row">
                <h3>6-asis</h3>
                <h2>SinBio</h2>
                <div id="head-text">
                    <h1 id="main-text">
                        <p id="static-text"> pojūtis</p>
                    </h1>
                    <svg version="1.1" id="movingDot" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 73.4 45.1" enable-background="new 0 0 73.4 45.1" xml:space="preserve">
                        <polygon fill="#FCBD1B" stroke="#FCBD1B" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" points="5.5,39.6 
	36.7,5.5 67.9,39.6 " />
                    </svg>
                </div>

            </div>

            <div id="middle" class="row">
                <hr align="left" id="line">
                <p id="middle-text">Pažink iš naujo gyvybės mokslus panirdamas į AR ir QR technologijas.</p>

            </div>
            <div id="bottom" class="row">
                <svg version="1.1" id="arrows" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 73.4 100" enable-background="new 0 0 73.4 100" xml:space="preserve">
                    <polyline id="top-triangle" fill="none" stroke="#FCBD1B" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" points="5.5,5.5 
	36.7,39.6 67.9,5.5 " />
                    <polyline fill="none" stroke="#FCBD1B" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" points="5.6,60.4 
	36.8,94.5 68,60.4 " />
                </svg>
            </div>
        </section>
        <section id="main-menu" class="section">
            <div id="menu-top" class="row">
                <div id="dyslexia"><img id="dysImg" src="images/disleksija.svg">
                    <p id="dysText">Modifikacija<br>disleksijai</p>
                </div>
                <div id="languages">
                </div>
            </div>
            <div class="row" id="middle-menu">
                <div>
                    <img src="./images/igem.png" height="442px" width="653px" alt="iGEM Vilnius Logo">
                </div>

                <div class="row" id="navigation">
                    <a href="./map.html" id="button-map"></a>
                    <a href="./info.html" id="button-instr"></a>
                    <a href="data/ar-markers.zip" download="ar-markers" id="button-print"></a>
                    <a href="http://vilniusigem.lt" id="button-igem" target="_blank" aria-label="Vilnius iGEM main page">iGEM</a>

                </div>


            </div>
            <div class="row" id="footer">
                <a href="#">Privatumo politika</a>
            </div>
        </section>
    </div>

    <script src="js/languages.js" charset="UTF-8"></script>
    <script src="js/opendyslexic.js" charset="UTF-8"></script>
    <script src="js/fullPage.min.js"></script>
    <script>
        var dotTravel
        var dotWidth;
        var textWidth;
        var distance;

        function setInitialElements() {
            var viewportOffsetDot = document.getElementById("movingDot").getBoundingClientRect();

            dotWidth = viewportOffsetDot.width;
            document.getElementById("arrows").style.width = dotWidth
            var arrowWidth = document.getElementById("arrows").getBoundingClientRect().width;
            dotLeft = viewportOffsetDot.left;

            document.getElementById("arrows").style.marginLeft = dotLeft

            var viewportOffseth1 = document.getElementById("main-text").getBoundingClientRect();
            textWidth = (viewportOffseth1.width * 0.9) + "px";
            document.getElementById("middle").style.width = (viewportOffseth1.width * 1.1) + "px";
            document.getElementById("middle-text").style.width = textWidth;
            document.getElementById("middle").style.marginLeft = viewportOffseth1.left + "px";
            var viewportDyslexia = document.getElementById("dysText").getBoundingClientRect();
            console.log(viewportDyslexia);
            document.getElementById("dysImg").style.height = viewportDyslexia.height + "px";
        }
        window.addEventListener('load', setInitialElements);
        window.onresize = setInitialElements

        function dotDown() {
            document.getElementById("movingDot").style.transition = "0.8s"
            document.getElementById("line").style.transitionDelay = "0s"
            document.getElementById("line").style.transition = "0.5s"
            document.getElementById("line").style.width = (document.getElementById("static-text").getBoundingClientRect().width * 0.95) + "px"
            var triangleBox = document.getElementById("top-triangle").getBoundingClientRect();
            var dotBox = document.getElementById("movingDot").getBoundingClientRect();
            distance = triangleBox.top - dotBox.top - 3;

            document.getElementById("movingDot").style.transform = "translateY(" + distance + "px) rotate(180deg) "
            var dotBox = document.getElementById("movingDot").getBoundingClientRect();
        }

        function dotUp() {
            console.log("up");


            var triangleBox = document.getElementById("top-triangle").getBoundingClientRect();
            var dotBox = document.getElementById("movingDot").getBoundingClientRect();

            document.getElementById("movingDot").style.transform = "translateY(0px) rotate(0deg) "
            document.getElementById("line").style.transition = "1s"
            document.getElementById("line").style.transitionDelay = "1s"

            document.getElementById("movingDot").style.transition = "2s"
            document.getElementById("line").style.width = (document.getElementById("static-text").getBoundingClientRect().width * 1.05) + "px"
        }
        var page = new FullPage("#main", {

            // section selector
            section: '.section',

            // animation options
            animationDuration: 2000,
            animationTiming: 'ease',
            animationTranform: 'transform',

            // enable side navigation
            pagination: true,

            // enable keyboard navigation
            keyboard: true,

            // enable touch events
            touch: true,

            // touch limit in ms
            touchLimit: 100,

            // infinite loop
            loop: false,

            // callbacks
            onLeave: function(e) {
                if (e == 0) {
                    dotDown()
                } else {
                    console.log(e)
                    dotUp()
                }
            },
            afterLoad: null,

        });

        let texts = {
            lt: {
                map: "Stotelių žemėlapis",
                instr: "Instrukcija",
                print: "Atsispausdink AR markerius"
            },
            en: {
                map: "Stops Map",
                instr: "Instructions",
                print: "Print AR Markers"
            }
        };

        function updateTexts(language) {
            document.getElementById("button-map").innerText = texts[language].map;
            document.getElementById("button-instr").innerText = texts[language].instr;
            document.getElementById("button-print").innerText = texts[language].print;
        }

        updateTexts(LanguageSwitcher.currentLanguage);
        LanguageSwitcher.makeLanguageBox(document.getElementById("languages"), 0);
        LanguageSwitcher.addOnLanguageChangeListener(updateTexts);

        FontSwitcher.init();
        document.getElementById("dyslexia").onclick = () => FontSwitcher.toggle();

    </script>
</body>

</html>
