<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Vilnius iGEM AR</title>


    <link href="./css/fonts.css" rel="stylesheet">
    <link href="./css/index.css" rel="stylesheet">


    <link href="./css/languagebox.css" rel="stylesheet">
    <link href="./css/opendyslexic.css" rel="stylesheet">
    <link href="./css/cookieconsent.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/jquery.pagepiling.css" />
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.pagepiling.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#pagepiling').pagepiling({
                scrollingSpeed: 1000,
                navigation: false,
                touchSensitivity: 2,
                onLeave: function(index, nextIndex, direction) {
                    if (index == 1) {
                        dotDown();
                    } else {
                        dotUp()
                    }
                }
            });
        });
    </script>
</head>

<body>
    <div id="pagepiling">
        <div id="intro" class="section">
            <div id="top" class="row">
                <div id="header-wrapper">
                    <h3 id="header-one">6-asis</h3>
                    <h2 id="header-two">SinBio</h2>
                    <div id="head-text">
                        <h1 id="main-text">
                            <p id="static-text">pojūtis</p>
                        </h1>
                        <svg version="1.1" id="movingDot" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 73.4 45.1" enable-background="new 0 0 73.4 45.1" xml:space="preserve">
                            <polygon fill="#FCBD1B" stroke="#FCBD1B" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" points="5.5,39.6 
	36.7,5.5 67.9,39.6 " />
                        </svg>
                    </div>
                </div>


            </div>

            <div id="middle" class="row">
                <hr align="left" id="line">
                <p id="middle-text">Pažink gyvybės mokslus iš naujo panirdamas į AR ir QR technologijas.</p>

            </div>
            <div id="bottom" class="row">
                <svg version="1.1" id="arrows" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 73.4 100" enable-background="new 0 0 73.4 100" xml:space="preserve">
                    <polyline id="top-triangle" fill="none" stroke="#FCBD1B" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" points="5.5,5.5 
	36.7,39.6 67.9,5.5 " />
                    <polyline fill="none" stroke="#FCBD1B" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" points="5.6,60.4 
	36.8,94.5 68,60.4 " />
                </svg>
            </div>
        </div>


        <div id="main-menu" class="section">
            <div id="menu-top" class="row">
                <div id="dyslexia"><img id="dysImg" src="images/disleksija.svg">
                    <p id="dysText">Modifikacija<br>disleksijai</p>
                </div>
                <div id="languages">
                </div>
            </div>
            <div class="row" id="middle-menu">
                <div>
                    <img src="./images/igem.png" height="442px" width="653px" alt="iGEM Vilnius Logo">
                </div>

                <div class="row" id="navigation">
                    <a href="./map.html" id="button-map"></a>
                    <a href="./info.html" id="button-instr"></a>
                    <a href="data/ar-markers.zip" download="ar-markers" id="button-print"></a>
                    <a href="http://vilniusigem.lt" id="button-igem" target="_blank" aria-label="Vilnius iGEM main page">iGEM</a>

                </div>


            </div>
            <div class="row" id="footer">
                <a href="#">Privatumo politika</a>
            </div>
        </div>

    </div>


    <script>
        var cookieConsentApplyElement = document.getElementById("main-menu");
    </script>
    <script src="js/ga.js"></script>
    <script src="js/languages.js" charset="UTF-8"></script>
    <script src="js/opendyslexic.js" charset="UTF-8"></script>
    <!--
    <script src="js/fullPage.min.js"></script>
-->


    <script>
        var dotTravel
        var dotWidth;
        var textWidth;
        var distance;

        function setInitialElements() {
            var viewportOffsetDot = document.getElementById("movingDot").getBoundingClientRect();

            dotWidth = viewportOffsetDot.width;
            document.getElementById("arrows").style.width = dotWidth
            var arrowWidth = document.getElementById("arrows").getBoundingClientRect().width;
            dotLeft = viewportOffsetDot.left;

            document.getElementById("arrows").style.marginLeft = dotLeft

            var viewportOffsetWrapper = document.getElementById("header-wrapper").getBoundingClientRect();
            textWidth = (viewportOffsetWrapper.width * 0.9) + "px";
            document.getElementById("middle").style.width = (viewportOffsetWrapper.width) + "px";
            document.getElementById("middle-text").style.width = textWidth;
            document.getElementById("middle").style.marginLeft = viewportOffsetWrapper.left + "px";
        }
        window.addEventListener('load', setInitialElements);
        window.addEventListener('resize', setInitialElements);

        function dotDown() {
            document.getElementById("movingDot").style.transition = "0.5s"
            document.getElementById("line").style.transitionDelay = "0s"
            document.getElementById("line").style.transition = "0.3s"
            var lineWidth = document.getElementById("header-wrapper").getBoundingClientRect().width - (document.getElementById("movingDot").getBoundingClientRect().width * 1.5)
            document.getElementById("line").style.width = lineWidth + "px"
            var triangleBox = document.getElementById("top-triangle").getBoundingClientRect();
            var dotBox = document.getElementById("movingDot").getBoundingClientRect();
            distance = triangleBox.top - dotBox.top - 3;

            document.getElementById("movingDot").style.transform = "translateY(" + distance + "px) rotate(180deg) "
            var dotBox = document.getElementById("movingDot").getBoundingClientRect();
        }

        function dotUp() {
            //console.log("up");


            var triangleBox = document.getElementById("top-triangle").getBoundingClientRect();
            var dotBox = document.getElementById("movingDot").getBoundingClientRect();

            document.getElementById("movingDot").style.transform = "translateY(0px) rotate(0deg) "
            document.getElementById("line").style.transition = "1s"
            document.getElementById("line").style.transitionDelay = "1s"

            document.getElementById("movingDot").style.transition = "2s"
            var lineWidth = document.getElementById("header-wrapper").getBoundingClientRect().width
            document.getElementById("line").style.width = lineWidth + "px"
        }
        let texts = {
            lt: {
                "button-map": "Stotelių žemėlapis",
                "button-instr": "Instrukcija",
                "button-print": "Atsispausdink AR markerius",
                "header-one": "6-asis",
                "header-two": "SinBio",
                "static-text": "pojūtis",
                "middle-text": "Pažink gyvybės mokslus iš naujo panirdamas į AR ir QR technologijas."
            },
            en: {
                "button-map": "Stops Map",
                "button-instr": "Instructions",
                "button-print": "Print AR Markers",
                "header-one": "6th",
                "header-two": "SynBio",
                "static-text": "sense",
                "middle-text": "Experience life sciences through AR and QR technologies."
            }
        };

        function updateTexts(language) {
            let elements = Object.keys(texts.lt);
            for (let element of elements) {
                document.getElementById(element).innerText = texts[language][element];
            }
        }

        updateTexts(LanguageSwitcher.currentLanguage);
        LanguageSwitcher.makeLanguageBox(document.getElementById("languages"), 0);
        LanguageSwitcher.addOnLanguageChangeListener(updateTexts);

        FontSwitcher.init();
        document.getElementById("dyslexia").onclick = () => FontSwitcher.toggle();
    </script>
</body></html>
