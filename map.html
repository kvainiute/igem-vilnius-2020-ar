
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <script src="https://cdn.maptiler.com/mapbox-gl-js/v1.5.1/mapbox-gl.js"></script>
        <link href="https://cdn.maptiler.com/mapbox-gl-js/v1.5.1/mapbox-gl.css" rel="stylesheet" />
        <!-- Bootstrap core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="css/main.min.css" rel="stylesheet">
        <style>
            #map {position: absolute; top: 0; right: 0; bottom: 0; left: 0;}
            .mapboxgl-popup {
                max-width: 400px;
                font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            }
            #foot {
                position: absolute;
                z-index: 1000;
                width: 100%;
                bottom: 0;
                left: 0;
                border-radius: 0;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <main role="main" class="inner cover"><a href="/" id="foot" class="btn btn-lg btn-secondary">gr&#303;&#382;ti atgal</a><br></main>
        
        
        <script>
            // You can remove the following line if you don't need support for RTL (right-to-left) labels:
            mapboxgl.setRTLTextPlugin('https://cdn.maptiler.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.1.2/mapbox-gl-rtl-text.js');
            if (!mapboxgl.supported()) {
                alert('Your browser does not support Mapbox GL');
            } else {
                mapboxgl.accessToken = 'pk.eyJ1IjoiaWdlbXZpbG5pdXMiLCJhIjoiY2s4b2tuM3ZmMDNmMDNlbnNyNjBjYmF6byJ9.awDMKTb7QstzkFAD3FPA-g';
                var map = new mapboxgl.Map({
                    container: 'map',
                    style: 'https://api.maptiler.com/maps/565e5c8b-5c56-489b-b954-0f260bfa40eb/style.json?key=dh3avbXkPzMlI59PVFsz',
                    center: [25.27989, 54.68842],
                    zoom: 13.45
                });
                map.on('load', function() {
                    console.log("loaded");
                    map.addSource('places', {
                        'type': 'geojson',
                        'data': {
                            'type': 'FeatureCollection',
                            'features': [
                                {
                                    'type': 'Feature',
                                    'geometry': {
                                        'type': 'Point',
                                        'coordinates': [
                                            25.27984005,
                                            54.68782848
                                        ]
                                    },
                                    'properties': {
                                        'description': 'Vinco Kudirkos aikštė<br><a href="modelview.html">Žiūrėti</a>'
                                    }
                                },
                                {
                                    'type': 'Feature',
                                    'geometry': {
                                        'type': 'Point',
                                        'coordinates': [
                                            25.28044107,
                                            54.69235005
                                        ]
                                    },
                                    'properties': {
                                        'description': 'Zaliasis tiltas<br><a href="modelview.html">Žiūrėti</a>'
                                    }
                                },
                                {
                                    'type': 'Feature',
                                    'geometry': {
                                        'type': 'Point',
                                        'coordinates': [
                                            25.28100000,
                                            54.69235005
                                        ]
                                    },
                                    'description': 'IDK<br><a href="modelview.html">Žiūrėti</a>'
                                }
                            ]
                        }
                    });
                    map.addLayer({
                        'id': 'places',
                        'interactive': true,
                        'type': 'symbol',
                        'source': 'places',
                        'layout': {
                            'text-field': ['get', 'title'],
                            'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],
                            'text-offset': [0, 0.6],
                            'text-anchor': 'top'
                        }
                    });
                });
                map.on('click', 'places' ,function(e) {
                    console.log("clicked");
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var description = e.features[0].properties.description;

                    // Ensure that if the map is zoomed out such that multiple
                    // copies of the feature are visible, the popup appears
                    // over the copy being pointed to.
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }

                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(description)
                        .addTo(map);
                });
            }
        </script>
    </body>
</html>
